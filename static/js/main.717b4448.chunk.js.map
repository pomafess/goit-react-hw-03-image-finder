{"version":3,"sources":["Components/Modal/Modal.module.css","Components/ImageGalleryItem/ImageGalleryItem.module.css","Components/Button/Button.module.css","Components/ImageGallery/ImageGallery.module.css","Components/Notify/Notify.module.css","App.module.css","Services/apiService.js","Services/initialState.js","Components/Searchbar/Searchbar.jsx","Components/ImageGalleryItem/ImageGalleryItem.jsx","Components/ImageGallery/ImageGallery.jsx","Components/Notify/Notify.jsx","Components/Modal/Modal.jsx","Components/Button/Button.jsx","App.js","index.js","Components/Searchbar/Searchbar.module.css"],"names":["module","exports","instance","axios","create","baseURL","params","image_type","key","per_page","orientation","initialState","images","totalHits","searchQuery","page","isLoading","error","emptyNotify","onModal","showButton","targetImage","Searchbar","state","changeInput","e","setState","target","value","handleSubmit","preventDefault","props","onSubmit","reset","this","className","styles","SearchForm","type","button","label","input","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","image","src","webformatURL","alt","tags","data-imageurl","largeImageURL","ImageGallery","toggleModal","imageElements","map","id","onClick","currentTarget","status","dataset","imageurl","Notify","message","Modal","checkEvent","window","addEventListener","removeEventListener","Overlay","img","Button","buttonBox","App","onButtonMoreClick","prevState","length","showNotify","searchImages","prevProps","get","getPhotos","then","data","hits","scrollTo","top","document","documentElement","scrollHeight","behavior","catch","finally","color","height","width","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.717b4448.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__15EfE\",\"Modal\":\"Modal_Modal__19jK1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1AgZG\",\"image\":\"ImageGalleryItem_image__1WHai\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonBox\":\"Button_buttonBox__wd0rO\",\"Button\":\"Button_Button__2N2xn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__26yXT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Notify\":\"Notify_Notify__2DsDD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__3wxxW\"};","import axios from 'axios';\r\n\r\n// const KEY = '20957538-039948fc53da0772e609db9c3';\r\n\r\n// const fetchImage = async (searchQuery, page) => {\r\n//   const response = await axios.get(\r\n//     `https://pixabay.com/api/?q=${searchQuery}&page=${page}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=12`,\r\n//   );\r\n//   return response.data;\r\n// };\r\n\r\n// export default fetchImage;\r\n\r\nconst instance = axios.create({\r\n    baseURL: \"https://pixabay.com/api/\",\r\n    params: {\r\n        image_type: \"photo\",\r\n        key: \"20957538-039948fc53da0772e609db9c3\",\r\n        per_page: 12,\r\n        orientation: \"horizontal\"\r\n  }\r\n});\r\n\r\nexport const getPhotos = (searchQuery, page) => {\r\n  return instance.get(`?q=${searchQuery}&page=${page}`);\r\n};","export const initialState = {\r\n    images: [],\r\n    totalHits: 0,\r\n    searchQuery: '',\r\n    page: 1,\r\n    isLoading: false,\r\n    error: null,\r\n    emptyNotify: false,\r\n    onModal: false,\r\n    showButton: false,\r\n    targetImage: null,\r\n};","import { Component } from 'react';\r\nimport { initialState } from \"../../Services/initialState\";\r\nimport styles from './Searchbar.module.css';\r\n\r\nclass Searchbar extends Component {\r\n  state = { ...initialState }\r\n\r\n  changeInput = e => {\r\n    this.setState({ searchQuery: e.target.value });\r\n     \r\n  };\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    this.props.onSubmit(this.state.searchQuery);\r\n\r\n   this.reset();\r\n  };\r\n\r\n reset = () => {\r\n    this.setState({ searchQuery: '' });\r\n  };\r\n\r\n  render() {\r\n    const { searchQuery } = this.state;\r\n\r\n    return (\r\n      <header className={styles.Searchbar}>\r\n        <form className={styles.SearchForm} onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={styles.button}>\r\n            <span className={styles.label}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={styles.input}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Введите ваш запрос\"\r\n            value={searchQuery}\r\n            onChange={this.changeInput}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n","import React from 'react';\r\nimport styles from './ImageGalleryItem.module.css';\r\n\r\nconst ImageGalleryItem = ({ image }) => {\r\n  return (\r\n    <li className={styles.ImageGalleryItem}>\r\n      <img\r\n        src={image.webformatURL}\r\n        alt={image.tags}\r\n        data-imageurl={image.largeImageURL}\r\n        className={styles.image}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import React from 'react';\r\n\r\nimport ImageGalleryItem from '../ImageGalleryItem';\r\nimport styles from './ImageGallery.module.css';\r\n\r\nconst ImageGallery = ({ images, toggleModal }) => {\r\n  const checkEvent = e => {\r\n    if (e.target !== e.currentTarget) {\r\n      toggleModal({\r\n        status: true,\r\n        src: e.target.dataset.imageurl,\r\n        alt: e.target.alt,\r\n      });\r\n    }\r\n  };\r\nconst imageElements = images.map(image => (\r\n        <ImageGalleryItem image={image} key={image.id} />\r\n      ))\r\n  return (\r\n    <ul className={styles.ImageGallery} onClick={checkEvent}>\r\n      {imageElements}\r\n    </ul>\r\n  );\r\n};\r\n \r\nexport default ImageGallery;\r\n","import React from 'react';\r\nimport styles from './Notify.module.css';\r\n\r\nconst Notify = ({ message }) => {\r\n  return <p className={styles.Notify}>{message}</p>;\r\n};\r\n\r\nexport default Notify;\r\n","import React, { Component } from 'react';\r\nimport styles from './Modal.module.css';\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.checkEvent);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.checkEvent);\r\n  }\r\n\r\n  checkEvent = e => {\r\n    if (e.key === 'Escape' || e.target === e.currentTarget) {\r\n      this.props.toggleModal({ status: false });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { src, alt } = this.props;\r\n\r\n    return (\r\n      <div className={styles.Overlay} onClick={this.checkEvent}>\r\n        <div className={styles.Modal}>\r\n          <img className={styles.img} src={src} alt={alt} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","import React from 'react';\r\nimport styles from './Button.module.css';\r\n\r\nconst Button = ({ onClick }) => {\r\n  return (\r\n    <div className={styles.buttonBox}>\r\n      <button type=\"button\" className={styles.Button} onClick={onClick}>\r\n        Load more\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","import React, { Component } from 'react';\r\nimport Loader from 'react-loader-spinner';\r\nimport {getPhotos} from './Services/apiService';\r\nimport Searchbar from './Components/Searchbar';\r\nimport ImageGallery from './Components/ImageGallery';\r\nimport Notify from './Components/Notify';\r\nimport Modal from './Components/Modal';\r\nimport Button from './Components/Button';\r\nimport {initialState} from \"./Services/initialState\"\r\n\r\nimport styles from './App.module.css';\r\n\r\nclass App extends Component {\r\n  state = { ...initialState }\r\n  \r\n  componentDidMount() {\r\n    this.searchImages();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.isLoading) {\r\n      // this.setState({ page: 1 });\r\n      this.searchImages();\r\n    }\r\n    if (prevState.page !== this.state.page) {\r\n      this.searchImages();\r\n    }\r\n  }\r\n\r\n  searchImages() {\r\n    const { searchQuery, page } = this.state;\r\n\r\n    getPhotos(searchQuery, page)\r\n      .then(({data}) => {\r\n\r\n        if (page === 1) {\r\n          this.setState({\r\n            totalHits: data.totalHits,\r\n            images: data.hits,\r\n          });\r\n        } else {\r\n          this.setState(prevState => ({\r\n            images: [...prevState.images, ...data.hits],\r\n          }));\r\n          window.scrollTo({\r\n            top: document.documentElement.scrollHeight,\r\n            behavior: 'smooth',\r\n          });\r\n        }\r\n        this.showButton();\r\n        this.showNotify();\r\n      })\r\n      .catch(error => this.setState({ error }))\r\n      .finally(() => this.setState({ isLoading: false }));\r\n  }\r\n\r\n  onSubmit = value => {\r\n    this.setState({ searchQuery: value, images: [], page: 1, isLoading: true });\r\n    \r\n  };\r\n\r\n  onButtonMoreClick = () => {\r\n    this.setState(prevState => ({\r\n      page: prevState.page + 1,\r\n    }));\r\n  };\r\n\r\n  showButton = () => {\r\n    const { totalHits, images } = this.state;\r\n\r\n    if (totalHits > images.length) {\r\n      this.setState({ showButton: true });\r\n    } else {\r\n      this.setState({ showButton: false });\r\n    }\r\n  }\r\n  showNotify = () => {\r\n    const { totalHits } = this.state;\r\n\r\n    if (!totalHits) {\r\n      this.setState({ emptyNotify: true });\r\n    } else {\r\n      this.setState({ emptyNotify: false });\r\n    }\r\n  };\r\n\r\n  toggleModal = ({ status, src, alt }) => {\r\n    if (status) {\r\n      this.setState({\r\n        targetImage: { src, alt },\r\n        onModal: true,\r\n      });\r\n    } else {\r\n      this.setState({\r\n        targetImage: null,\r\n        onModal: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      images,\r\n      isLoading,\r\n      error,\r\n      emptyNotify,\r\n      onModal,\r\n      targetImage,\r\n      showButton,\r\n    } = this.state;\r\n\r\n    return (\r\n      <div className={styles.App}>\r\n        <Searchbar onSubmit={this.onSubmit} />\r\n        {error && <Notify message={`Что-то не так: ${error.message}`} />}\r\n        {isLoading && (\r\n          <Loader type=\"BallTriangle\" color=\"#2a52be\" height={120} width={120} />\r\n        )}\r\n        {images.length > 0 && (\r\n          <ImageGallery images={images} toggleModal={this.toggleModal} />\r\n        )}\r\n        {emptyNotify && (\r\n          <Notify message=\"Ничего не найдено.\" />\r\n        )}\r\n        {onModal && (\r\n          <Modal\r\n            src={targetImage.src}\r\n            alt={targetImage.alt}\r\n            toggleModal={this.toggleModal}\r\n          />\r\n        )}\r\n        {showButton && <Button onClick={this.onButtonMoreClick} />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2kN_m\",\"SearchForm\":\"Searchbar_SearchForm__1FPYC\",\"button\":\"Searchbar_button__3xg3f\",\"label\":\"Searchbar_label__1KmkC\",\"input\":\"Searchbar_input__3cF98\"};"],"sourceRoot":""}