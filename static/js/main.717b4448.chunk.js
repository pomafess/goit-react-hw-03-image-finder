(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(t,e,a){t.exports={Overlay:"Modal_Overlay__15EfE",Modal:"Modal_Modal__19jK1"}},12:function(t,e,a){t.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__1AgZG",image:"ImageGalleryItem_image__1WHai"}},13:function(t,e,a){t.exports={buttonBox:"Button_buttonBox__wd0rO",Button:"Button_Button__2N2xn"}},26:function(t,e,a){t.exports={ImageGallery:"ImageGallery_ImageGallery__26yXT"}},27:function(t,e,a){t.exports={Notify:"Notify_Notify__2DsDD"}},28:function(t,e,a){t.exports={App:"App_App__3wxxW"}},33:function(t,e,a){},73:function(t,e,a){"use strict";a.r(e);var n=a(1),o=a.n(n),r=a(23),c=a.n(r),s=(a(33),a(14)),i=a(9),l=a(4),u=a(5),h=a(7),m=a(6),g=a(24),p=a.n(g),b=a(25),d=a.n(b).a.create({baseURL:"https://pixabay.com/api/",params:{image_type:"photo",key:"20957538-039948fc53da0772e609db9c3",per_page:12,orientation:"horizontal"}}),f={images:[],totalHits:0,searchQuery:"",page:1,isLoading:!1,error:null,emptyNotify:!1,onModal:!1,showButton:!1,targetImage:null},j=a(8),y=a.n(j),v=a(0),O=function(t){Object(h.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state=Object(i.a)({},f),t.changeInput=function(e){t.setState({searchQuery:e.target.value})},t.handleSubmit=function(e){e.preventDefault(),t.props.onSubmit(t.state.searchQuery),t.reset()},t.reset=function(){t.setState({searchQuery:""})},t}return Object(u.a)(a,[{key:"render",value:function(){var t=this.state.searchQuery;return Object(v.jsx)("header",{className:y.a.Searchbar,children:Object(v.jsxs)("form",{className:y.a.SearchForm,onSubmit:this.handleSubmit,children:[Object(v.jsx)("button",{type:"submit",className:y.a.button,children:Object(v.jsx)("span",{className:y.a.label,children:"Search"})}),Object(v.jsx)("input",{className:y.a.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u0437\u0430\u043f\u0440\u043e\u0441",value:t,onChange:this.changeInput})]})})}}]),a}(n.Component),_=a(12),x=a.n(_),S=function(t){var e=t.image;return Object(v.jsx)("li",{className:x.a.ImageGalleryItem,children:Object(v.jsx)("img",{src:e.webformatURL,alt:e.tags,"data-imageurl":e.largeImageURL,className:x.a.image})})},k=a(26),w=a.n(k),N=function(t){var e=t.images,a=t.toggleModal,n=e.map((function(t){return Object(v.jsx)(S,{image:t},t.id)}));return Object(v.jsx)("ul",{className:w.a.ImageGallery,onClick:function(t){t.target!==t.currentTarget&&a({status:!0,src:t.target.dataset.imageurl,alt:t.target.alt})},children:n})},I=a(27),M=a.n(I),B=function(t){var e=t.message;return Object(v.jsx)("p",{className:M.a.Notify,children:e})},C=a(10),E=a.n(C),L=function(t){Object(h.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).checkEvent=function(e){"Escape"!==e.key&&e.target!==e.currentTarget||t.props.toggleModal({status:!1})},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.checkEvent)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.checkEvent)}},{key:"render",value:function(){var t=this.props,e=t.src,a=t.alt;return Object(v.jsx)("div",{className:E.a.Overlay,onClick:this.checkEvent,children:Object(v.jsx)("div",{className:E.a.Modal,children:Object(v.jsx)("img",{className:E.a.img,src:e,alt:a})})})}}]),a}(n.Component),G=a(13),A=a.n(G),D=function(t){var e=t.onClick;return Object(v.jsx)("div",{className:A.a.buttonBox,children:Object(v.jsx)("button",{type:"button",className:A.a.Button,onClick:e,children:"Load more"})})},H=a(28),Q=a.n(H),F=function(t){Object(h.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state=Object(i.a)({},f),t.onSubmit=function(e){t.setState({searchQuery:e,images:[],page:1,isLoading:!0})},t.onButtonMoreClick=function(){t.setState((function(t){return{page:t.page+1}}))},t.showButton=function(){var e=t.state;e.totalHits>e.images.length?t.setState({showButton:!0}):t.setState({showButton:!1})},t.showNotify=function(){t.state.totalHits?t.setState({emptyNotify:!1}):t.setState({emptyNotify:!0})},t.toggleModal=function(e){var a=e.status,n=e.src,o=e.alt;a?t.setState({targetImage:{src:n,alt:o},onModal:!0}):t.setState({targetImage:null,onModal:!1})},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.searchImages()}},{key:"componentDidUpdate",value:function(t,e){this.state.isLoading&&this.searchImages(),e.page!==this.state.page&&this.searchImages()}},{key:"searchImages",value:function(){var t=this,e=this.state,a=e.searchQuery,n=e.page;(function(t,e){return d.get("?q=".concat(t,"&page=").concat(e))})(a,n).then((function(e){var a=e.data;1===n?t.setState({totalHits:a.totalHits,images:a.hits}):(t.setState((function(t){return{images:[].concat(Object(s.a)(t.images),Object(s.a)(a.hits))}})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})),t.showButton(),t.showNotify()})).catch((function(e){return t.setState({error:e})})).finally((function(){return t.setState({isLoading:!1})}))}},{key:"render",value:function(){var t=this.state,e=t.images,a=t.isLoading,n=t.error,o=t.emptyNotify,r=t.onModal,c=t.targetImage,s=t.showButton;return Object(v.jsxs)("div",{className:Q.a.App,children:[Object(v.jsx)(O,{onSubmit:this.onSubmit}),n&&Object(v.jsx)(B,{message:"\u0427\u0442\u043e-\u0442\u043e \u043d\u0435 \u0442\u0430\u043a: ".concat(n.message)}),a&&Object(v.jsx)(p.a,{type:"BallTriangle",color:"#2a52be",height:120,width:120}),e.length>0&&Object(v.jsx)(N,{images:e,toggleModal:this.toggleModal}),o&&Object(v.jsx)(B,{message:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e."}),r&&Object(v.jsx)(L,{src:c.src,alt:c.alt,toggleModal:this.toggleModal}),s&&Object(v.jsx)(D,{onClick:this.onButtonMoreClick})]})}}]),a}(n.Component);c.a.render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(F,{})}),document.getElementById("root"))},8:function(t,e,a){t.exports={Searchbar:"Searchbar_Searchbar__2kN_m",SearchForm:"Searchbar_SearchForm__1FPYC",button:"Searchbar_button__3xg3f",label:"Searchbar_label__1KmkC",input:"Searchbar_input__3cF98"}}},[[73,1,2]]]);
//# sourceMappingURL=main.717b4448.chunk.js.map