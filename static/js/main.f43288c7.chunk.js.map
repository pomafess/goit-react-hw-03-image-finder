{"version":3,"sources":["Components/ImageGalleryItem/ImageGalleryItem.module.css","Components/Modal/Modal.module.css","Components/Button/Button.module.css","App.module.css","Components/ImageGallery/ImageGallery.module.css","Components/Notify/Notify.module.css","Services/apiService.js","Components/Searchbar/Searchbar.jsx","Components/ImageGalleryItem/ImageGalleryItem.jsx","Components/ImageGallery/ImageGallery.jsx","Components/Notify/Notify.jsx","Components/Modal/Modal.jsx","Components/Button/Button.jsx","Services/initialState.js","App.js","index.js","Components/Searchbar/Searchbar.module.css"],"names":["module","exports","instance","axios","create","baseURL","params","image_type","key","per_page","orientation","Searchbar","state","searchQuery","changeInput","e","setState","target","value","handleSubmit","preventDefault","props","onSubmit","reset","this","className","styles","SearchForm","type","button","label","input","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","image","imageGalleryItem","src","webformatURL","alt","tags","data-imageurl","largeImageURL","defaultProps","propTypes","images","PropTypes","array","isRequired","toggleModal","func","ImageGallery","imageElements","map","id","imageGallery","onClick","currentTarget","status","dataset","imageurl","Notify","message","notify","Modal","checkEvent","window","addEventListener","removeEventListener","overlay","modal","children","Button","text","buttonBox","initialState","totalHits","page","isLoading","error","emptyNotify","onModal","showButton","targetImage","App","onButtonMoreClick","prevState","length","showNotify","searchImages","prevProps","get","getPhotos","then","data","hits","scrollTo","top","document","documentElement","scrollHeight","behavior","catch","finally","color","height","width","img","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f43288c7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGalleryItem\":\"ImageGalleryItem_imageGalleryItem__3h_ey\",\"image\":\"ImageGalleryItem_image__1WHai\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__1Or8S\",\"modal\":\"Modal_modal__1HwkF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonBox\":\"Button_buttonBox__wd0rO\",\"button\":\"Button_button__16362\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__3wxxW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGallery\":\"ImageGallery_imageGallery__22hgH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notify\":\"Notify_notify__1GZBh\"};","import axios from 'axios';\r\n\r\n// const KEY = '20957538-039948fc53da0772e609db9c3';\r\n\r\n// const fetchImage = async (searchQuery, page) => {\r\n//   const response = await axios.get(\r\n//     `https://pixabay.com/api/?q=${searchQuery}&page=${page}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=12`,\r\n//   );\r\n//   return response.data;\r\n// };\r\n\r\n// export default fetchImage;\r\n\r\nconst instance = axios.create({\r\n    baseURL: \"https://pixabay.com/api/\",\r\n    params: {\r\n        image_type: \"photo\",\r\n        key: \"20957538-039948fc53da0772e609db9c3\",\r\n        per_page: 12,\r\n        orientation: \"horizontal\"\r\n  }\r\n});\r\n\r\nexport const getPhotos = (searchQuery, page) => {\r\n  return instance.get(`?q=${searchQuery}&page=${page}`);\r\n};","import { Component } from 'react';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport styles from './Searchbar.module.css';\r\n\r\nclass Searchbar extends Component {\r\n  state = { searchQuery: \"\" }\r\n\r\n  changeInput = e => {\r\n    this.setState({ searchQuery: e.target.value });\r\n     \r\n  };\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    this.props.onSubmit(this.state.searchQuery);\r\n\r\n   this.reset();\r\n  };\r\n\r\n reset = () => {\r\n    this.setState({ searchQuery: '' });\r\n  };\r\n\r\n  render() {\r\n    const { searchQuery } = this.state;\r\n\r\n    return (\r\n      <header className={styles.Searchbar}>\r\n        <form className={styles.SearchForm} onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={styles.button}>\r\n            <span className={styles.label}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={styles.input}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Введите ваш запрос\"\r\n            value={searchQuery}\r\n            onChange={this.changeInput}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired\r\n};\r\n\r\nexport default Searchbar;\r\n","import React from 'react';\r\n\r\nimport PropTypes from 'prop-types';\r\n\r\nimport styles from './ImageGalleryItem.module.css';\r\n\r\nconst ImageGalleryItem = ({ image }) => {\r\n  return (\r\n    <li className={styles.imageGalleryItem}>\r\n      <img\r\n        src={image.webformatURL}\r\n        alt={image.tags}\r\n        data-imageurl={image.largeImageURL}\r\n        className={styles.image}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nImageGalleryItem.defaultProps = {\r\n  image: {}\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n  image: PropTypes.object\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import React from 'react';\r\n\r\nimport ImageGalleryItem from '../ImageGalleryItem';\r\n\r\nimport PropTypes from 'prop-types';\r\n\r\nimport styles from './ImageGallery.module.css';\r\n\r\nconst ImageGallery = ({ images, toggleModal }) => {\r\n  const checkEvent = e => {\r\n    if (e.target !== e.currentTarget) {\r\n      toggleModal({\r\n        status: true,\r\n        src: e.target.dataset.imageurl,\r\n        alt: e.target.alt,\r\n      });\r\n    }\r\n  };\r\nconst imageElements = images.map(image => (\r\n        <ImageGalleryItem image={image} key={image.id} />\r\n      ))\r\n  return (\r\n    <ul className={styles.imageGallery} onClick={checkEvent}>\r\n      {imageElements}\r\n    </ul>\r\n  );\r\n};\r\n \r\n\r\n\r\nImageGalleryItem.propTypes = {\r\n  images: PropTypes.array.isRequired,\r\n  toggleModal: PropTypes.func.isRequired\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React from 'react';\r\n\r\nimport PropTypes from 'prop-types';\r\n\r\nimport styles from './Notify.module.css';\r\n\r\nconst Notify = ({ message }) => {\r\n  return <p className={styles.notify}>{message}</p>;\r\n};\r\n\r\n\r\n\r\n\r\nNotify.propTypes = {\r\n  message: PropTypes.string.isRequired\r\n};\r\n\r\nexport default Notify;\r\n","import React, { Component } from 'react';\r\n\r\nimport PropTypes from 'prop-types';\r\n\r\nimport styles from './Modal.module.css';\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.checkEvent);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.checkEvent);\r\n  }\r\n\r\n  checkEvent = e => {\r\n    if (e.key === 'Escape' || e.target === e.currentTarget) {\r\n      this.props.toggleModal({ status: false });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    \r\n\r\n    return (\r\n      <div className={styles.overlay} onClick={this.checkEvent}>\r\n        <div className={styles.modal}>\r\n          {this.props.children}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\nModal.propTypes = {\r\n  toggleModal: PropTypes.func.isRequired\r\n};\r\n\r\nexport default Modal;\r\n","import React from 'react';\r\n\r\nimport styles from './Button.module.css';\r\n\r\nconst Button = ({ onClick, text, className }) => {\r\n  return (\r\n    <div className={`${styles.buttonBox} ${className}`}>\r\n      <button type=\"button\" className={styles.button} onClick={onClick}>\r\n        {text}\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nButton.defaultProps = {\r\n  className: \"\",\r\n  text: \"Button\"\r\n}\r\n\r\nexport default Button;\r\n","export const initialState = {\r\n    images: [],\r\n    totalHits: 0,\r\n    searchQuery: '',\r\n    page: 1,\r\n    isLoading: false,\r\n    error: null,\r\n    emptyNotify: false,\r\n    onModal: false,\r\n    showButton: false,\r\n    targetImage: null,\r\n};","import React, { Component } from 'react';\r\nimport Loader from 'react-loader-spinner';\r\n\r\nimport {getPhotos} from './Services/apiService';\r\nimport Searchbar from './Components/Searchbar';\r\nimport ImageGallery from './Components/ImageGallery';\r\nimport Notify from './Components/Notify';\r\nimport Modal from './Components/Modal';\r\nimport Button from './Components/Button';\r\n\r\nimport {initialState} from \"./Services/initialState\"\r\n\r\nimport styles from './App.module.css';\r\n\r\nclass App extends Component {\r\n  state = { ...initialState }\r\n  \r\n  componentDidMount() {\r\n    this.searchImages();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.isLoading) {\r\n      // this.setState({ page: 1 });\r\n      this.searchImages();\r\n    }\r\n    if (prevState.page !== this.state.page) {\r\n      this.searchImages();\r\n    }\r\n  }\r\n\r\n  searchImages() {\r\n    const { searchQuery, page } = this.state;\r\n\r\n    getPhotos(searchQuery, page)\r\n      .then(({data}) => {\r\n\r\n        if (page === 1) {\r\n          this.setState({\r\n            totalHits: data.totalHits,\r\n            images: data.hits,\r\n          });\r\n        } else {\r\n          this.setState(prevState => ({\r\n            images: [...prevState.images, ...data.hits],\r\n          }));\r\n          window.scrollTo({\r\n            top: document.documentElement.scrollHeight,\r\n            behavior: 'smooth',\r\n          });\r\n        }\r\n        this.showButton();\r\n        this.showNotify();\r\n      })\r\n      .catch(error => this.setState({ error }))\r\n      .finally(() => this.setState({ isLoading: false }));\r\n  }\r\n\r\n  onSubmit = value => {\r\n    this.setState({ searchQuery: value, images: [], page: 1, isLoading: true });\r\n    \r\n  };\r\n\r\n  onButtonMoreClick = () => {\r\n    this.setState(prevState => ({\r\n      page: prevState.page + 1,\r\n    }));\r\n  };\r\n\r\n  showButton = () => {\r\n    const { totalHits, images } = this.state;\r\n\r\n    if (totalHits > images.length) {\r\n      this.setState({ showButton: true });\r\n    } else {\r\n      this.setState({ showButton: false });\r\n    }\r\n  }\r\n\r\n  showNotify = () => {\r\n    const { totalHits } = this.state;\r\n\r\n    if (!totalHits) {\r\n      this.setState({ emptyNotify: true });\r\n    } else {\r\n      this.setState({ emptyNotify: false });\r\n    }\r\n  };\r\n\r\n  toggleModal = ({ status, src, alt }) => {\r\n    if (status) {\r\n      this.setState({\r\n        targetImage: { src, alt },\r\n        onModal: true,\r\n      });\r\n    } else {\r\n      this.setState({\r\n        targetImage: null,\r\n        onModal: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      images,\r\n      isLoading,\r\n      error,\r\n      emptyNotify,\r\n      onModal,\r\n      targetImage,\r\n      showButton,\r\n    } = this.state;\r\n\r\n    return (\r\n      <div className={styles.App}>\r\n        <Searchbar onSubmit={this.onSubmit} />\r\n        {error && <Notify message={`Что-то не так: ${error.message}`} />}\r\n        {isLoading && (\r\n          <Loader type=\"BallTriangle\" color=\"#2a52be\" height={120} width={120} />\r\n        )}\r\n        {images.length && (\r\n          <ImageGallery images={images} toggleModal={this.toggleModal} />\r\n        )}\r\n        {emptyNotify && (\r\n          <Notify message=\"Ничего не найдено.\" />\r\n        )}\r\n        {onModal && (\r\n          <Modal toggleModal={this.toggleModal}><img className={styles.img} src={targetImage.src} alt=\"\" /></Modal>\r\n        )}\r\n        {showButton && <Button text=\"Load more\" onClick={this.onButtonMoreClick} />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2kN_m\",\"SearchForm\":\"Searchbar_SearchForm__1FPYC\",\"button\":\"Searchbar_button__3xg3f\",\"label\":\"Searchbar_label__1KmkC\",\"input\":\"Searchbar_input__3cF98\"};"],"sourceRoot":""}